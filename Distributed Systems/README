code has a deadlock somewhere, i believe
